<!doctype html><html lang="zh-CN"><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="generator" content="VuePress 2.0.0-rc.17" /><meta name="theme" content="VuePress Theme Plume " /><script id="check-dark-mode">;(function () {const um= localStorage.getItem('vuepress-theme-appearance') || 'auto';const sm = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;const isDark = um === 'dark' || (um !== 'light' && sm);document.documentElement.dataset.theme = isDark ? 'dark' : 'light';})();</script><script id="check-mac-os">document.documentElement.classList.toggle('mac', /Mac|iPhone|iPod|iPad/i.test(navigator.platform))</script><link rel="icon" type="image/png" sizes="32x32" href="/blogger.png"><title>k8s集群网络上 | 阿哲</title><meta name="description" content=""><link rel="preload" href="/assets/style-D1sUe2kL.css" as="style"><link rel="stylesheet" href="/assets/style-D1sUe2kL.css"><link rel="modulepreload" href="/assets/app-D5peQ_E2.js"><link rel="modulepreload" href="/assets/index.html-Ll0fjA0A.js"><link rel="prefetch" href="/assets/index.html-BbydQqMH.js" as="script"><link rel="prefetch" href="/assets/index.html-Du37zU9u.js" as="script"><link rel="prefetch" href="/assets/index.html-CIshL6h3.js" as="script"><link rel="prefetch" href="/assets/index.html-BzNYU7RX.js" as="script"><link rel="prefetch" href="/assets/index.html-c02M_ZuU.js" as="script"><link rel="prefetch" href="/assets/index.html-CxcSUmtz.js" as="script"><link rel="prefetch" href="/assets/index.html-CXj0lBtF.js" as="script"><link rel="prefetch" href="/assets/index.html-BHVVIZY9.js" as="script"><link rel="prefetch" href="/assets/index.html-BaK4Wkpr.js" as="script"><link rel="prefetch" href="/assets/index.html-CHPUvHKi.js" as="script"><link rel="prefetch" href="/assets/index.html-DdhJTfwj.js" as="script"><link rel="prefetch" href="/assets/index.html-Dz-NdHAP.js" as="script"><link rel="prefetch" href="/assets/index.html-DOl2RVYH.js" as="script"><link rel="prefetch" href="/assets/index.html-D99CTpob.js" as="script"><link rel="prefetch" href="/assets/index.html-CCcimEIG.js" as="script"><link rel="prefetch" href="/assets/index.html-B9P1_6ae.js" as="script"><link rel="prefetch" href="/assets/index.html-CI_I1LAf.js" as="script"><link rel="prefetch" href="/assets/index.html-CkmQmfYE.js" as="script"><link rel="prefetch" href="/assets/index.html-B3jgOQVh.js" as="script"><link rel="prefetch" href="/assets/index.html-bkwpV_6S.js" as="script"><link rel="prefetch" href="/assets/index.html-JrLheDFB.js" as="script"><link rel="prefetch" href="/assets/index.html-Dd_-pcwE.js" as="script"><link rel="prefetch" href="/assets/index.html-D8zqYDE9.js" as="script"><link rel="prefetch" href="/assets/index.html-CchHOCz_.js" as="script"><link rel="prefetch" href="/assets/index.html-DJ3OEPb6.js" as="script"><link rel="prefetch" href="/assets/index.html-BCCih5ek.js" as="script"><link rel="prefetch" href="/assets/index.html-B7Ei85F6.js" as="script"><link rel="prefetch" href="/assets/index.html-Duptj1R1.js" as="script"><link rel="prefetch" href="/assets/index.html-CiQSF3IV.js" as="script"><link rel="prefetch" href="/assets/index.html-XdH9DxSB.js" as="script"><link rel="prefetch" href="/assets/1.django知识回顾.html-Cmbv50hI.js" as="script"><link rel="prefetch" href="/assets/2.drf序列化器.html-Sx8Xl12Q.js" as="script"><link rel="prefetch" href="/assets/3.drf视图.html-D4itxuse.js" as="script"><link rel="prefetch" href="/assets/4.drf常用功能.html-3eKYXg_H.js" as="script"><link rel="prefetch" href="/assets/index.html-DNJfWryL.js" as="script"><link rel="prefetch" href="/assets/index.html-CNNdiOIg.js" as="script"><link rel="prefetch" href="/assets/index.html-CGWpM449.js" as="script"><link rel="prefetch" href="/assets/index.html-skwQ6DUx.js" as="script"><link rel="prefetch" href="/assets/index.html-BpL9ltJF.js" as="script"><link rel="prefetch" href="/assets/index.html-BDlu7whU.js" as="script"><link rel="prefetch" href="/assets/index.html-zOJqoRCx.js" as="script"><link rel="prefetch" href="/assets/index.html-Dc1hgEq2.js" as="script"><link rel="prefetch" href="/assets/index.html-C4jVssG7.js" as="script"><link rel="prefetch" href="/assets/index.html-BFwfoAaT.js" as="script"><link rel="prefetch" href="/assets/index.html-C3gkLPG9.js" as="script"><link rel="prefetch" href="/assets/index.html-DyffQVdb.js" as="script"><link rel="prefetch" href="/assets/index.html-CWLkAD-7.js" as="script"><link rel="prefetch" href="/assets/index.html-Copr927T.js" as="script"><link rel="prefetch" href="/assets/index.html-DeLXuJat.js" as="script"><link rel="prefetch" href="/assets/index.html-BK_BLglB.js" as="script"><link rel="prefetch" href="/assets/index.html-BYJlHLah.js" as="script"><link rel="prefetch" href="/assets/index.html-BYcRqGcJ.js" as="script"><link rel="prefetch" href="/assets/index.html-Cg4_Cvx_.js" as="script"><link rel="prefetch" href="/assets/index.html-XmL1IzTV.js" as="script"><link rel="prefetch" href="/assets/index.html--aEgTV2Z.js" as="script"><link rel="prefetch" href="/assets/index.html-DLQ3QgpG.js" as="script"><link rel="prefetch" href="/assets/index.html-LZYQU08o.js" as="script"><link rel="prefetch" href="/assets/index.html-BluD6MyY.js" as="script"><link rel="prefetch" href="/assets/index.html-KT0Ay9Fg.js" as="script"><link rel="prefetch" href="/assets/index.html-CWvZ-9Hu.js" as="script"><link rel="prefetch" href="/assets/index.html-BVyem7_I.js" as="script"><link rel="prefetch" href="/assets/index.html-CKDIvefN.js" as="script"><link rel="prefetch" href="/assets/index.html-BWVK-mh2.js" as="script"><link rel="prefetch" href="/assets/index.html-tXzzm3eZ.js" as="script"><link rel="prefetch" href="/assets/index.html-DtxCGkCZ.js" as="script"><link rel="prefetch" href="/assets/index.html-ErAv7zoU.js" as="script"><link rel="prefetch" href="/assets/index.html-Hrx99ccO.js" as="script"><link rel="prefetch" href="/assets/index.html--VTHE8V7.js" as="script"><link rel="prefetch" href="/assets/index.html-BwNqpzY7.js" as="script"><link rel="prefetch" href="/assets/index.html-CkCOyff0.js" as="script"><link rel="prefetch" href="/assets/index.html-ONjnKC19.js" as="script"><link rel="prefetch" href="/assets/index.html-D5HMkDrP.js" as="script"><link rel="prefetch" href="/assets/index.html-D-MJsIH0.js" as="script"><link rel="prefetch" href="/assets/index.html-B7bLqN9Z.js" as="script"><link rel="prefetch" href="/assets/index.html-DYvXc_gQ.js" as="script"><link rel="prefetch" href="/assets/index.html-smkylglA.js" as="script"><link rel="prefetch" href="/assets/index.html-CFyCP7W3.js" as="script"><link rel="prefetch" href="/assets/index.html-DZRvpEl0.js" as="script"><link rel="prefetch" href="/assets/index.html-Bj3ve12S.js" as="script"><link rel="prefetch" href="/assets/index.html-B_7DS6xs.js" as="script"><link rel="prefetch" href="/assets/index.html-Cu-nAM8Y.js" as="script"><link rel="prefetch" href="/assets/index.html-BUqKWgOZ.js" as="script"><link rel="prefetch" href="/assets/index.html-D3so1Lcv.js" as="script"><link rel="prefetch" href="/assets/index.html-C9bTAdyQ.js" as="script"><link rel="prefetch" href="/assets/index.html-CG0yRhjN.js" as="script"><link rel="prefetch" href="/assets/index.html-DVcB1Pj_.js" as="script"><link rel="prefetch" href="/assets/index.html-CBDqiSJg.js" as="script"><link rel="prefetch" href="/assets/index.html-B-JHXq8p.js" as="script"><link rel="prefetch" href="/assets/index.html-DqwAPSm7.js" as="script"><link rel="prefetch" href="/assets/404.html-CCfBXXFp.js" as="script"><link rel="prefetch" href="/assets/index.html-_TVdVrWF.js" as="script"><link rel="prefetch" href="/assets/index.html-DvTMMw6q.js" as="script"><link rel="prefetch" href="/assets/index.html-DyzjrEqU.js" as="script"><link rel="prefetch" href="/assets/index.html-zZTdMRCg.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-GXRgw7eJ.js" as="script"><link rel="prefetch" href="/assets/searchBox-default-BCF44HzZ.js" as="script"><link rel="prefetch" href="/assets/SearchBox-zoFp8PjU.js" as="script"><link rel="prefetch" href="/assets/giscus-C26m1eXs.js" as="script"><link rel="prefetch" href="/assets/setupDevtools-7MC2TMWH-BKYel-wA.js" as="script"></head><body><div id="app"><!--[--><div class="theme-plume vp-layout" vp-container data-v-0b7e05b4><!--[--><!--[--><!--]--><!--[--><span tabindex="-1" data-v-d5a8d0bc></span><a href="#VPContent" class="vp-skip-link visually-hidden" data-v-d5a8d0bc> Skip to content </a><!--]--><!----><div class="vp-nav" data-v-0b7e05b4 data-v-1992b709><div class="vp-navbar" vp-navbar data-v-1992b709 data-v-70d97d16><div class="wrapper" data-v-70d97d16><div class="container" data-v-70d97d16><div class="title" data-v-70d97d16><div class="vp-navbar-title has-sidebar" data-v-70d97d16 data-v-2c8d4622><a class="vp-link no-icon link title" href="/" data-v-2c8d4622 data-v-442a52aa><!--[--><!--[--><!--]--><!--[--><!--[--><!--[--><img class="vp-image dark logo" src="/blogger.png" alt data-v-7fbfbc9b><!--]--><!--[--><img class="vp-image light logo" src="/blogger.png" alt data-v-7fbfbc9b><!--]--><!--]--><!--]--><span data-v-2c8d4622>阿哲</span><!--[--><!--]--><!--]--><!----></a></div></div><div class="content" data-v-70d97d16><div class="content-body" data-v-70d97d16><!--[--><!--]--><div class="vp-navbar-search search" data-v-70d97d16><div class="search-wrapper" data-v-97535d1e><!----><div id="local-search" data-v-97535d1e><button type="button" class="mini-search mini-search-button" aria-label="搜索文档" data-v-97535d1e><span class="mini-search-button-container"><svg class="mini-search-search-icon" width="20" height="20" viewBox="0 0 20 20" aria-label="search icon"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="mini-search-button-placeholder">搜索文档</span></span><span class="mini-search-button-keys"><kbd class="mini-search-button-key"></kbd><kbd class="mini-search-button-key">K</kbd></span></button></div></div></div><nav aria-labelledby="main-nav-aria-label" class="vp-navbar-menu menu" data-v-70d97d16 data-v-d43c1732><span id="main-nav-aria-label" class="visually-hidden" data-v-d43c1732>Main Navigation</span><!--[--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/" tabindex="0" data-v-d43c1732 data-v-9970a379 data-v-442a52aa><!--[--><!----><span data-v-9970a379>首页</span><!--]--><!----></a><!--]--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="https://liuzhemax.github.io/" target="_blank" rel="noreferrer" tabindex="0" data-v-d43c1732 data-v-9970a379 data-v-442a52aa><!--[--><!----><span data-v-9970a379>博客</span><!--]--><span class="vpi-external-link icon" data-v-442a52aa></span></a><!--]--><!--[--><div class="vp-flyout vp-navbar-menu-group" data-v-d43c1732 data-v-feafea4e><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-feafea4e><span class="text" data-v-feafea4e><!----><!----><span data-v-feafea4e>笔记</span><span class="vpi-chevron-down text-icon" data-v-feafea4e></span></span></button><div class="menu" data-v-feafea4e><div class="vp-menu" data-v-feafea4e data-v-709dc2b1><div class="items" data-v-709dc2b1><!--[--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-aaf95230><a class="vp-link no-icon link" href="/notes/k8s/" data-v-aaf95230 data-v-442a52aa><!--[--><!----> K8S入门到进阶<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-aaf95230><a class="vp-link no-icon link" href="/notes/python/" data-v-aaf95230 data-v-442a52aa><!--[--><!----> Python基础<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-aaf95230><a class="vp-link no-icon link" href="/notes/django/" data-v-aaf95230 data-v-442a52aa><!--[--><!----> Django入门到进阶<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-aaf95230><a class="vp-link no-icon link" href="/notes/web/" data-v-aaf95230 data-v-442a52aa><!--[--><!----> 前端基础<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="vp-flyout vp-navbar-menu-group" data-v-d43c1732 data-v-feafea4e><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-feafea4e><span class="text" data-v-feafea4e><!----><!----><span data-v-feafea4e>开源项目</span><span class="vpi-chevron-down text-icon" data-v-feafea4e></span></span></button><div class="menu" data-v-feafea4e><div class="vp-menu" data-v-feafea4e data-v-709dc2b1><div class="items" data-v-709dc2b1><!--[--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-aaf95230><a class="vp-link no-icon link" href="/notes/devops/" data-v-aaf95230 data-v-442a52aa><!--[--><!----> 自动化运维平台<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="vp-flyout vp-navbar-menu-group" data-v-d43c1732 data-v-feafea4e><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-feafea4e><span class="text" data-v-feafea4e><!----><!----><span data-v-feafea4e>更多</span><span class="vpi-chevron-down text-icon" data-v-feafea4e></span></span></button><div class="menu" data-v-feafea4e><div class="vp-menu" data-v-feafea4e data-v-709dc2b1><div class="items" data-v-709dc2b1><!--[--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-aaf95230><a class="vp-link no-icon link" href="/notes/more/" data-v-aaf95230 data-v-442a52aa><!--[--><!----> 站点导航<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/about/" tabindex="0" data-v-d43c1732 data-v-9970a379 data-v-442a52aa><!--[--><!----><span data-v-9970a379>关于</span><!--]--><!----></a><!--]--><!--]--></nav><!----><div class="vp-navbar-appearance appearance" data-v-70d97d16 data-v-a295abf6><button class="vp-switch vp-switch-appearance" type="button" role="switch" title aria-checked="false" data-v-a295abf6 data-v-537740e0 data-v-d84fedac><span class="check" data-v-d84fedac><span class="icon" data-v-d84fedac><!--[--><span class="vpi-sun sun" data-v-537740e0></span><span class="vpi-moon moon" data-v-537740e0></span><!--]--></span></span></button></div><div class="vp-social-links vp-navbar-social-links social-links" data-v-70d97d16 data-v-ad52545c data-v-40bac536><!--[--><a class="vp-social-link no-icon" href="https://github.com/liuzhemax" aria-label="github" target="_blank" rel="noopener" data-v-40bac536 data-v-67b21932><span class="vpi-social-github" /></a><a class="vp-social-link no-icon" href="https://gitee.com/lucky_liuzhe/" aria-label target="_blank" rel="noopener" data-v-40bac536 data-v-67b21932><svg t="1727923245710" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2305" width="200" height="200"><path d="M512 1024C229.222 1024 0 794.778 0 512S229.222 0 512 0s512 229.222 512 512-229.222 512-512 512z m259.149-568.883h-290.74a25.293 25.293 0 0 0-25.292 25.293l-0.026 63.206c0 13.952 11.315 25.293 25.267 25.293h177.024c13.978 0 25.293 11.315 25.293 25.267v12.646a75.853 75.853 0 0 1-75.853 75.853h-240.23a25.293 25.293 0 0 1-25.267-25.293V417.203a75.853 75.853 0 0 1 75.827-75.853h353.946a25.293 25.293 0 0 0 25.267-25.292l0.077-63.207a25.293 25.293 0 0 0-25.268-25.293H417.152a189.62 189.62 0 0 0-189.62 189.645V771.15c0 13.977 11.316 25.293 25.294 25.293h372.94a170.65 170.65 0 0 0 170.65-170.65V480.384a25.293 25.293 0 0 0-25.293-25.267z" fill="#C71D23" p-id="2306"></path></svg></a><a class="vp-social-link no-icon" href="/about/#联系我" aria-label target="_blank" rel="noopener" data-v-40bac536 data-v-67b21932><svg t="1727923648082" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="8105" width="200" height="200"><path d="M337.387283 341.82659c-17.757225 0-35.514451 11.83815-35.514451 29.595375s17.757225 29.595376 35.514451 29.595376 29.595376-11.83815 29.595376-29.595376c0-18.49711-11.83815-29.595376-29.595376-29.595375zM577.849711 513.479769c-11.83815 0-22.936416 12.578035-22.936416 23.6763 0 12.578035 11.83815 23.676301 22.936416 23.676301 17.757225 0 29.595376-11.83815 29.595376-23.676301s-11.83815-23.676301-29.595376-23.6763zM501.641618 401.017341c17.757225 0 29.595376-12.578035 29.595376-29.595376 0-17.757225-11.83815-29.595376-29.595376-29.595375s-35.514451 11.83815-35.51445 29.595375 17.757225 29.595376 35.51445 29.595376zM706.589595 513.479769c-11.83815 0-22.936416 12.578035-22.936416 23.6763 0 12.578035 11.83815 23.676301 22.936416 23.676301 17.757225 0 29.595376-11.83815 29.595376-23.676301s-11.83815-23.676301-29.595376-23.6763z" fill="#28C445" p-id="8106"></path><path d="M510.520231 2.959538C228.624277 2.959538 0 231.583815 0 513.479769s228.624277 510.520231 510.520231 510.520231 510.520231-228.624277 510.520231-510.520231-228.624277-510.520231-510.520231-510.520231zM413.595376 644.439306c-29.595376 0-53.271676-5.919075-81.387284-12.578034l-81.387283 41.433526 22.936416-71.768786c-58.450867-41.433526-93.965318-95.445087-93.965317-159.815029 0-113.202312 105.803468-201.988439 233.803468-201.98844 114.682081 0 216.046243 71.028902 236.023121 166.473989-7.398844-0.739884-14.797688-1.479769-22.196532-1.479769-110.982659 1.479769-198.289017 85.086705-198.289017 188.67052 0 17.017341 2.959538 33.294798 7.398844 49.572255-7.398844 0.739884-15.537572 1.479769-22.936416 1.479768z m346.265896 82.867052l17.757225 59.190752-63.630058-35.514451c-22.936416 5.919075-46.612717 11.83815-70.289017 11.83815-111.722543 0-199.768786-76.947977-199.768786-172.393063-0.739884-94.705202 87.306358-171.653179 198.289017-171.65318 105.803468 0 199.028902 77.687861 199.028902 172.393064 0 53.271676-34.774566 100.624277-81.387283 136.138728z" fill="#28C445" p-id="8107"></path></svg></a><a class="vp-social-link no-icon" href="/about/#联系我" aria-label target="_blank" rel="noopener" data-v-40bac536 data-v-67b21932><svg t="1727921239345" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7478" width="200" height="200"><path d="M511.09761 957.257c-80.159 0-153.737-25.019-201.11-62.386-24.057 6.702-54.831 17.489-74.252 30.864-16.617 11.439-14.546 23.106-11.55 27.816 13.15 20.689 225.583 13.211 286.912 6.767v-3.061z" fill="#FAAD08" p-id="7479"></path><path d="M496.65061 957.257c80.157 0 153.737-25.019 201.11-62.386 24.057 6.702 54.83 17.489 74.253 30.864 16.616 11.439 14.543 23.106 11.55 27.816-13.15 20.689-225.584 13.211-286.914 6.767v-3.061z" fill="#FAAD08" p-id="7480"></path><path d="M497.12861 474.524c131.934-0.876 237.669-25.783 273.497-35.34 8.541-2.28 13.11-6.364 13.11-6.364 0.03-1.172 0.542-20.952 0.542-31.155C784.27761 229.833 701.12561 57.173 496.64061 57.162 292.15661 57.173 209.00061 229.832 209.00061 401.665c0 10.203 0.516 29.983 0.547 31.155 0 0 3.717 3.821 10.529 5.67 33.078 8.98 140.803 35.139 276.08 36.034h0.972z" fill="#000000" p-id="7481"></path><path d="M860.28261 619.782c-8.12-26.086-19.204-56.506-30.427-85.72 0 0-6.456-0.795-9.718 0.148-100.71 29.205-222.773 47.818-315.792 46.695h-0.962C410.88561 582.017 289.65061 563.617 189.27961 534.698 185.44461 533.595 177.87261 534.063 177.87261 534.063 166.64961 563.276 155.56661 593.696 147.44761 619.782 108.72961 744.168 121.27261 795.644 130.82461 796.798c20.496 2.474 79.78-93.637 79.78-93.637 0 97.66 88.324 247.617 290.576 248.996a718.01 718.01 0 0 1 5.367 0C708.80161 950.778 797.12261 800.822 797.12261 703.162c0 0 59.284 96.111 79.783 93.637 9.55-1.154 22.093-52.63-16.623-177.017" fill="#000000" p-id="7482"></path><path d="M434.38261 316.917c-27.9 1.24-51.745-30.106-53.24-69.956-1.518-39.877 19.858-73.207 47.764-74.454 27.875-1.224 51.703 30.109 53.218 69.974 1.527 39.877-19.853 73.2-47.742 74.436m206.67-69.956c-1.494 39.85-25.34 71.194-53.24 69.956-27.888-1.238-49.269-34.559-47.742-74.435 1.513-39.868 25.341-71.201 53.216-69.974 27.909 1.247 49.285 34.576 47.767 74.453" fill="#FFFFFF" p-id="7483"></path><path d="M683.94261 368.627c-7.323-17.609-81.062-37.227-172.353-37.227h-0.98c-91.29 0-165.031 19.618-172.352 37.227a6.244 6.244 0 0 0-0.535 2.505c0 1.269 0.393 2.414 1.006 3.386 6.168 9.765 88.054 58.018 171.882 58.018h0.98c83.827 0 165.71-48.25 171.881-58.016a6.352 6.352 0 0 0 1.002-3.395c0-0.897-0.2-1.736-0.531-2.498" fill="#FAAD08" p-id="7484"></path><path d="M467.63161 256.377c1.26 15.886-7.377 30-19.266 31.542-11.907 1.544-22.569-10.083-23.836-25.978-1.243-15.895 7.381-30.008 19.25-31.538 11.927-1.549 22.607 10.088 23.852 25.974m73.097 7.935c2.533-4.118 19.827-25.77 55.62-17.886 9.401 2.07 13.75 5.116 14.668 6.316 1.355 1.77 1.726 4.29 0.352 7.684-2.722 6.725-8.338 6.542-11.454 5.226-2.01-0.85-26.94-15.889-49.905 6.553-1.579 1.545-4.405 2.074-7.085 0.242-2.678-1.834-3.786-5.553-2.196-8.135" fill="#000000" p-id="7485"></path><path d="M504.33261 584.495h-0.967c-63.568 0.752-140.646-7.504-215.286-21.92-6.391 36.262-10.25 81.838-6.936 136.196 8.37 137.384 91.62 223.736 220.118 224.996H506.48461c128.498-1.26 211.748-87.612 220.12-224.996 3.314-54.362-0.547-99.938-6.94-136.203-74.654 14.423-151.745 22.684-215.332 21.927" fill="#FFFFFF" p-id="7486"></path><path d="M323.27461 577.016v137.468s64.957 12.705 130.031 3.91V591.59c-41.225-2.262-85.688-7.304-130.031-14.574" fill="#EB1C26" p-id="7487"></path><path d="M788.09761 432.536s-121.98 40.387-283.743 41.539h-0.962c-161.497-1.147-283.328-41.401-283.744-41.539l-40.854 106.952c102.186 32.31 228.837 53.135 324.598 51.926l0.96-0.002c95.768 1.216 222.4-19.61 324.6-51.924l-40.855-106.952z" fill="#EB1C26" p-id="7488"></path></svg></a><!--]--></div><div class="vp-flyout vp-navbar-extra extra" data-v-70d97d16 data-v-652282fd data-v-feafea4e><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-feafea4e><span class="vpi-more-horizontal icon" data-v-feafea4e></span></button><div class="menu" data-v-feafea4e><div class="vp-menu" data-v-feafea4e data-v-709dc2b1><!----><!--[--><!--[--><!----><div class="group" data-v-652282fd><div class="item appearance" data-v-652282fd><p class="label" data-v-652282fd>外观</p><div class="appearance-action" data-v-652282fd><button class="vp-switch vp-switch-appearance" type="button" role="switch" title aria-checked="false" data-v-652282fd data-v-537740e0 data-v-d84fedac><span class="check" data-v-d84fedac><span class="icon" data-v-d84fedac><!--[--><span class="vpi-sun sun" data-v-537740e0></span><span class="vpi-moon moon" data-v-537740e0></span><!--]--></span></span></button></div></div></div><div class="group" data-v-652282fd><div class="item social-links" data-v-652282fd><div class="vp-social-links social-links-list" data-v-652282fd data-v-40bac536><!--[--><a class="vp-social-link no-icon" href="https://github.com/liuzhemax" aria-label="github" target="_blank" rel="noopener" data-v-40bac536 data-v-67b21932><span class="vpi-social-github" /></a><a class="vp-social-link no-icon" href="https://gitee.com/lucky_liuzhe/" aria-label target="_blank" rel="noopener" data-v-40bac536 data-v-67b21932><svg t="1727923245710" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2305" width="200" height="200"><path d="M512 1024C229.222 1024 0 794.778 0 512S229.222 0 512 0s512 229.222 512 512-229.222 512-512 512z m259.149-568.883h-290.74a25.293 25.293 0 0 0-25.292 25.293l-0.026 63.206c0 13.952 11.315 25.293 25.267 25.293h177.024c13.978 0 25.293 11.315 25.293 25.267v12.646a75.853 75.853 0 0 1-75.853 75.853h-240.23a25.293 25.293 0 0 1-25.267-25.293V417.203a75.853 75.853 0 0 1 75.827-75.853h353.946a25.293 25.293 0 0 0 25.267-25.292l0.077-63.207a25.293 25.293 0 0 0-25.268-25.293H417.152a189.62 189.62 0 0 0-189.62 189.645V771.15c0 13.977 11.316 25.293 25.294 25.293h372.94a170.65 170.65 0 0 0 170.65-170.65V480.384a25.293 25.293 0 0 0-25.293-25.267z" fill="#C71D23" p-id="2306"></path></svg></a><a class="vp-social-link no-icon" href="/about/#联系我" aria-label target="_blank" rel="noopener" data-v-40bac536 data-v-67b21932><svg t="1727923648082" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="8105" width="200" height="200"><path d="M337.387283 341.82659c-17.757225 0-35.514451 11.83815-35.514451 29.595375s17.757225 29.595376 35.514451 29.595376 29.595376-11.83815 29.595376-29.595376c0-18.49711-11.83815-29.595376-29.595376-29.595375zM577.849711 513.479769c-11.83815 0-22.936416 12.578035-22.936416 23.6763 0 12.578035 11.83815 23.676301 22.936416 23.676301 17.757225 0 29.595376-11.83815 29.595376-23.676301s-11.83815-23.676301-29.595376-23.6763zM501.641618 401.017341c17.757225 0 29.595376-12.578035 29.595376-29.595376 0-17.757225-11.83815-29.595376-29.595376-29.595375s-35.514451 11.83815-35.51445 29.595375 17.757225 29.595376 35.51445 29.595376zM706.589595 513.479769c-11.83815 0-22.936416 12.578035-22.936416 23.6763 0 12.578035 11.83815 23.676301 22.936416 23.676301 17.757225 0 29.595376-11.83815 29.595376-23.676301s-11.83815-23.676301-29.595376-23.6763z" fill="#28C445" p-id="8106"></path><path d="M510.520231 2.959538C228.624277 2.959538 0 231.583815 0 513.479769s228.624277 510.520231 510.520231 510.520231 510.520231-228.624277 510.520231-510.520231-228.624277-510.520231-510.520231-510.520231zM413.595376 644.439306c-29.595376 0-53.271676-5.919075-81.387284-12.578034l-81.387283 41.433526 22.936416-71.768786c-58.450867-41.433526-93.965318-95.445087-93.965317-159.815029 0-113.202312 105.803468-201.988439 233.803468-201.98844 114.682081 0 216.046243 71.028902 236.023121 166.473989-7.398844-0.739884-14.797688-1.479769-22.196532-1.479769-110.982659 1.479769-198.289017 85.086705-198.289017 188.67052 0 17.017341 2.959538 33.294798 7.398844 49.572255-7.398844 0.739884-15.537572 1.479769-22.936416 1.479768z m346.265896 82.867052l17.757225 59.190752-63.630058-35.514451c-22.936416 5.919075-46.612717 11.83815-70.289017 11.83815-111.722543 0-199.768786-76.947977-199.768786-172.393063-0.739884-94.705202 87.306358-171.653179 198.289017-171.65318 105.803468 0 199.028902 77.687861 199.028902 172.393064 0 53.271676-34.774566 100.624277-81.387283 136.138728z" fill="#28C445" p-id="8107"></path></svg></a><a class="vp-social-link no-icon" href="/about/#联系我" aria-label target="_blank" rel="noopener" data-v-40bac536 data-v-67b21932><svg t="1727921239345" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7478" width="200" height="200"><path d="M511.09761 957.257c-80.159 0-153.737-25.019-201.11-62.386-24.057 6.702-54.831 17.489-74.252 30.864-16.617 11.439-14.546 23.106-11.55 27.816 13.15 20.689 225.583 13.211 286.912 6.767v-3.061z" fill="#FAAD08" p-id="7479"></path><path d="M496.65061 957.257c80.157 0 153.737-25.019 201.11-62.386 24.057 6.702 54.83 17.489 74.253 30.864 16.616 11.439 14.543 23.106 11.55 27.816-13.15 20.689-225.584 13.211-286.914 6.767v-3.061z" fill="#FAAD08" p-id="7480"></path><path d="M497.12861 474.524c131.934-0.876 237.669-25.783 273.497-35.34 8.541-2.28 13.11-6.364 13.11-6.364 0.03-1.172 0.542-20.952 0.542-31.155C784.27761 229.833 701.12561 57.173 496.64061 57.162 292.15661 57.173 209.00061 229.832 209.00061 401.665c0 10.203 0.516 29.983 0.547 31.155 0 0 3.717 3.821 10.529 5.67 33.078 8.98 140.803 35.139 276.08 36.034h0.972z" fill="#000000" p-id="7481"></path><path d="M860.28261 619.782c-8.12-26.086-19.204-56.506-30.427-85.72 0 0-6.456-0.795-9.718 0.148-100.71 29.205-222.773 47.818-315.792 46.695h-0.962C410.88561 582.017 289.65061 563.617 189.27961 534.698 185.44461 533.595 177.87261 534.063 177.87261 534.063 166.64961 563.276 155.56661 593.696 147.44761 619.782 108.72961 744.168 121.27261 795.644 130.82461 796.798c20.496 2.474 79.78-93.637 79.78-93.637 0 97.66 88.324 247.617 290.576 248.996a718.01 718.01 0 0 1 5.367 0C708.80161 950.778 797.12261 800.822 797.12261 703.162c0 0 59.284 96.111 79.783 93.637 9.55-1.154 22.093-52.63-16.623-177.017" fill="#000000" p-id="7482"></path><path d="M434.38261 316.917c-27.9 1.24-51.745-30.106-53.24-69.956-1.518-39.877 19.858-73.207 47.764-74.454 27.875-1.224 51.703 30.109 53.218 69.974 1.527 39.877-19.853 73.2-47.742 74.436m206.67-69.956c-1.494 39.85-25.34 71.194-53.24 69.956-27.888-1.238-49.269-34.559-47.742-74.435 1.513-39.868 25.341-71.201 53.216-69.974 27.909 1.247 49.285 34.576 47.767 74.453" fill="#FFFFFF" p-id="7483"></path><path d="M683.94261 368.627c-7.323-17.609-81.062-37.227-172.353-37.227h-0.98c-91.29 0-165.031 19.618-172.352 37.227a6.244 6.244 0 0 0-0.535 2.505c0 1.269 0.393 2.414 1.006 3.386 6.168 9.765 88.054 58.018 171.882 58.018h0.98c83.827 0 165.71-48.25 171.881-58.016a6.352 6.352 0 0 0 1.002-3.395c0-0.897-0.2-1.736-0.531-2.498" fill="#FAAD08" p-id="7484"></path><path d="M467.63161 256.377c1.26 15.886-7.377 30-19.266 31.542-11.907 1.544-22.569-10.083-23.836-25.978-1.243-15.895 7.381-30.008 19.25-31.538 11.927-1.549 22.607 10.088 23.852 25.974m73.097 7.935c2.533-4.118 19.827-25.77 55.62-17.886 9.401 2.07 13.75 5.116 14.668 6.316 1.355 1.77 1.726 4.29 0.352 7.684-2.722 6.725-8.338 6.542-11.454 5.226-2.01-0.85-26.94-15.889-49.905 6.553-1.579 1.545-4.405 2.074-7.085 0.242-2.678-1.834-3.786-5.553-2.196-8.135" fill="#000000" p-id="7485"></path><path d="M504.33261 584.495h-0.967c-63.568 0.752-140.646-7.504-215.286-21.92-6.391 36.262-10.25 81.838-6.936 136.196 8.37 137.384 91.62 223.736 220.118 224.996H506.48461c128.498-1.26 211.748-87.612 220.12-224.996 3.314-54.362-0.547-99.938-6.94-136.203-74.654 14.423-151.745 22.684-215.332 21.927" fill="#FFFFFF" p-id="7486"></path><path d="M323.27461 577.016v137.468s64.957 12.705 130.031 3.91V591.59c-41.225-2.262-85.688-7.304-130.031-14.574" fill="#EB1C26" p-id="7487"></path><path d="M788.09761 432.536s-121.98 40.387-283.743 41.539h-0.962c-161.497-1.147-283.328-41.401-283.744-41.539l-40.854 106.952c102.186 32.31 228.837 53.135 324.598 51.926l0.96-0.002c95.768 1.216 222.4-19.61 324.6-51.924l-40.855-106.952z" fill="#EB1C26" p-id="7488"></path></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="vp-navbar-hamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="nav-screen" data-v-70d97d16 data-v-2b50024d><span class="container" data-v-2b50024d><span class="top" data-v-2b50024d></span><span class="middle" data-v-2b50024d></span><span class="bottom" data-v-2b50024d></span></span></button></div></div></div></div><div class="divider" data-v-70d97d16><div class="divider-line" data-v-70d97d16></div></div></div><!----></div><div class="vp-local-nav reached-top is-blog" data-v-0b7e05b4 data-v-1dc3518c><button class="menu" aria-expanded="false" aria-controls="SidebarNav" data-v-1dc3518c><span class="vpi-align-left menu-icon" data-v-1dc3518c></span><span class="menu-text" data-v-1dc3518c>Menu</span></button><div class="vp-local-nav-outline-dropdown" style="--vp-vh:0px;" data-v-1dc3518c data-v-423a73ec><button data-v-423a73ec>返回顶部</button><!----></div></div><aside class="vp-sidebar" vp-sidebar data-v-0b7e05b4 data-v-360082b7><div class="curtain" data-v-360082b7></div><nav id="SidebarNav" class="nav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-360082b7><span id="sidebar-aria-label" class="visually-hidden" data-v-360082b7> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-473fd05b><section class="vp-sidebar-item sidebar-item level-0" data-v-473fd05b data-v-b88148be><!----><div class="items" data-v-b88148be><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-b88148be data-v-b88148be><div class="item" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><a class="vp-link no-icon link link" href="/notes/k8s/" data-v-b88148be data-v-442a52aa><!--[--><p class="text" data-v-b88148be>K8S学习笔记</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-473fd05b><section class="vp-sidebar-item sidebar-item level-0 collapsible" data-v-473fd05b data-v-b88148be><div class="item" role="button" tabindex="0" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><h2 class="text" data-v-b88148be>K8S入门</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b88148be><span class="vpi-chevron-right caret-icon" data-v-b88148be></span></div></div><div class="items" data-v-b88148be><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-b88148be data-v-b88148be><div class="item" tabindex="0" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><a class="vp-link no-icon link link" href="/notes/k8s/wcm7h7pv/" data-v-b88148be data-v-442a52aa><!--[--><p class="text" data-v-b88148be>kubernetes核心概念</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-b88148be data-v-b88148be><div class="item" tabindex="0" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><a class="vp-link no-icon link link" href="/notes/k8s/jdqmd1pv/" data-v-b88148be data-v-442a52aa><!--[--><p class="text" data-v-b88148be>快速部署一个k8s集群</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-b88148be data-v-b88148be><div class="item" tabindex="0" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><a class="vp-link no-icon link link" href="/notes/k8s/uf1ihb99/" data-v-b88148be data-v-442a52aa><!--[--><p class="text" data-v-b88148be>kubectl命令行管理工具</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-b88148be data-v-b88148be><div class="item" tabindex="0" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><a class="vp-link no-icon link link" href="/notes/k8s/zhfb2l1h/" data-v-b88148be data-v-442a52aa><!--[--><p class="text" data-v-b88148be>资源编排</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-b88148be data-v-b88148be><div class="item" tabindex="0" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><a class="vp-link no-icon link link" href="/notes/k8s/eyoeje2f/" data-v-b88148be data-v-442a52aa><!--[--><p class="text" data-v-b88148be>深入理解pod对象调度</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-b88148be data-v-b88148be><div class="item" tabindex="0" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><a class="vp-link no-icon link link" href="/notes/k8s/tmkuv016/" data-v-b88148be data-v-442a52aa><!--[--><p class="text" data-v-b88148be>深入理解pod对象基本管理</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-b88148be data-v-b88148be><div class="item" tabindex="0" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><a class="vp-link no-icon link link" href="/notes/k8s/cu141vso/" data-v-b88148be data-v-442a52aa><!--[--><p class="text" data-v-b88148be>常用工作负载控制器</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-b88148be data-v-b88148be><div class="item" tabindex="0" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><a class="vp-link no-icon link link" href="/notes/k8s/m32l4596/" data-v-b88148be data-v-442a52aa><!--[--><p class="text" data-v-b88148be>service对外暴露你的应用</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-b88148be data-v-b88148be><div class="item" tabindex="0" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><a class="vp-link no-icon link link" href="/notes/k8s/ly9z7gd3/" data-v-b88148be data-v-442a52aa><!--[--><p class="text" data-v-b88148be>ingress最佳方式对外暴露应用</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-b88148be data-v-b88148be><div class="item" tabindex="0" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><a class="vp-link no-icon link link" href="/notes/k8s/6aa06sf3/" data-v-b88148be data-v-442a52aa><!--[--><p class="text" data-v-b88148be>管理应用程序配置</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-b88148be data-v-b88148be><div class="item" tabindex="0" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><a class="vp-link no-icon link link" href="/notes/k8s/mg20s2pp/" data-v-b88148be data-v-442a52aa><!--[--><p class="text" data-v-b88148be>数据卷与持久数据卷</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-b88148be data-v-b88148be><div class="item" tabindex="0" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><a class="vp-link no-icon link link" href="/notes/k8s/2rouji53/" data-v-b88148be data-v-442a52aa><!--[--><p class="text" data-v-b88148be>再谈有状态应用部署statefulset</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-b88148be data-v-b88148be><div class="item" tabindex="0" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><a class="vp-link no-icon link link" href="/notes/k8s/i3m5hqy8/" data-v-b88148be data-v-442a52aa><!--[--><p class="text" data-v-b88148be>k8s安全控制</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-b88148be data-v-b88148be><div class="item" tabindex="0" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><a class="vp-link no-icon link link" href="/notes/k8s/qexangap/" data-v-b88148be data-v-442a52aa><!--[--><p class="text" data-v-b88148be>k8s应用包管理器helm初探</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-b88148be data-v-b88148be><div class="item" tabindex="0" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><a class="vp-link no-icon link link" href="/notes/k8s/vbm16uxm/" data-v-b88148be data-v-442a52aa><!--[--><p class="text" data-v-b88148be>实际项目部署案例</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-b88148be data-v-b88148be><div class="item" tabindex="0" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><a class="vp-link no-icon link link" href="/notes/k8s/dxxfsk66/" data-v-b88148be data-v-442a52aa><!--[--><p class="text" data-v-b88148be>prometheus监控kubernetes</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-b88148be data-v-b88148be><div class="item" tabindex="0" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><a class="vp-link no-icon link link" href="/notes/k8s/csp1s14g/" data-v-b88148be data-v-442a52aa><!--[--><p class="text" data-v-b88148be>elk收集kubernetes应用日志</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-b88148be data-v-b88148be><div class="item" tabindex="0" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><a class="vp-link no-icon link link" href="/notes/k8s/bmmioclu/" data-v-b88148be data-v-442a52aa><!--[--><p class="text" data-v-b88148be>基于jenkins构建持续集成ci平台</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-473fd05b><section class="vp-sidebar-item sidebar-item level-0 collapsible has-active" data-v-473fd05b data-v-b88148be><div class="item" role="button" tabindex="0" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><h2 class="text" data-v-b88148be>K8S进阶</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b88148be><span class="vpi-chevron-right caret-icon" data-v-b88148be></span></div></div><div class="items" data-v-b88148be><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-b88148be data-v-b88148be><div class="item" tabindex="0" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><a class="vp-link no-icon link link" href="/notes/k8s/dpeuv5bm/" data-v-b88148be data-v-442a52aa><!--[--><p class="text" data-v-b88148be>kubernetes运维管理</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-b88148be data-v-b88148be><div class="item" tabindex="0" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><a class="vp-link no-icon link link" href="/notes/k8s/bhw3hbjh/" data-v-b88148be data-v-442a52aa><!--[--><p class="text" data-v-b88148be>kubernetes弹性伸缩</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-b88148be data-v-b88148be><div class="item" tabindex="0" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><a class="vp-link no-icon link link" href="/notes/k8s/lbvvqgtj/" data-v-b88148be data-v-442a52aa><!--[--><p class="text" data-v-b88148be>kubernetes应用包管理器helm上</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-b88148be data-v-b88148be><div class="item" tabindex="0" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><a class="vp-link no-icon link link" href="/notes/k8s/lo8jgp54/" data-v-b88148be data-v-442a52aa><!--[--><p class="text" data-v-b88148be>kubernetes应用包管理器helm下</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-b88148be data-v-b88148be><div class="item" tabindex="0" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><a class="vp-link no-icon link link" href="/notes/k8s/e7q1cuv0/" data-v-b88148be data-v-442a52aa><!--[--><p class="text" data-v-b88148be>k8s集群网络上</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-b88148be data-v-b88148be><div class="item" tabindex="0" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><a class="vp-link no-icon link link" href="/notes/k8s/e3olzjeh/" data-v-b88148be data-v-442a52aa><!--[--><p class="text" data-v-b88148be>k8s集群网络下</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-b88148be data-v-b88148be><div class="item" tabindex="0" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><a class="vp-link no-icon link link" href="/notes/k8s/0orp8ikp/" data-v-b88148be data-v-442a52aa><!--[--><p class="text" data-v-b88148be>微服务容器化迁移</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-b88148be data-v-b88148be><div class="item" tabindex="0" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><a class="vp-link no-icon link link" href="/notes/k8s/chfe0n1x/" data-v-b88148be data-v-442a52aa><!--[--><p class="text" data-v-b88148be>基于jenkins构建微服务发布平台</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-b88148be data-v-b88148be><div class="item" tabindex="0" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><a class="vp-link no-icon link link" href="/notes/k8s/hed98b6p/" data-v-b88148be data-v-442a52aa><!--[--><p class="text" data-v-b88148be>微服务治理istio初探上</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-b88148be data-v-b88148be><div class="item" tabindex="0" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><a class="vp-link no-icon link link" href="/notes/k8s/8h4h0qk9/" data-v-b88148be data-v-442a52aa><!--[--><p class="text" data-v-b88148be>微服务治理istio初探下</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><!--[--><div id="VPContent" vp-content class="vp-content has-sidebar" data-v-0b7e05b4 data-v-eb709286><div class="has-sidebar has-aside vp-doc-container" data-v-e798167f><!--[--><!--]--><div class="container" data-v-e798167f><div class="aside" vp-outline data-v-e798167f><div class="aside-curtain" data-v-e798167f></div><div class="aside-container" data-v-e798167f><div class="aside-content" data-v-e798167f><div class="vp-doc-aside" data-v-e798167f data-v-5976474c><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="vp-doc-aside-outline" role="navigation" data-v-5976474c data-v-aa56eba0><div class="content" data-v-aa56eba0><div class="outline-marker" data-v-aa56eba0></div><div id="doc-outline-aria-label" aria-level="2" class="outline-title" role="heading" data-v-aa56eba0><span data-v-aa56eba0>此页内容</span><span class="vpi-print icon" data-v-aa56eba0></span></div><ul class="root" data-v-aa56eba0 data-v-54c74388><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-5976474c></div><!--[--><!--]--></div></div></div></div><div class="content" data-v-e798167f><div class="content-container" data-v-e798167f><!--[--><!--]--><main class="main" data-v-e798167f><nav class="vp-breadcrumb" data-v-e798167f data-v-0668b171><ol vocab="https://schema.org/" typeof="BreadcrumbList" data-v-0668b171><!--[--><li property="itemListElement" typeof="ListItem" data-v-0668b171><a class="vp-link no-icon link breadcrumb" href="/" property="item" typeof="WebPage" data-v-0668b171 data-v-442a52aa><!--[-->首页<!--]--><!----></a><span class="vpi-chevron-right" data-v-0668b171></span><meta property="position" content="1" data-v-0668b171></li><li property="itemListElement" typeof="ListItem" data-v-0668b171><span class="vp-link no-icon breadcrumb" href="/" property="item" typeof="WebPage" data-v-0668b171 data-v-442a52aa><!--[-->K8S进阶<!--]--><!----></span><span class="vpi-chevron-right" data-v-0668b171></span><meta property="position" content="2" data-v-0668b171></li><li property="itemListElement" typeof="ListItem" data-v-0668b171><a class="vp-link no-icon link breadcrumb current" href="/notes/k8s/e7q1cuv0/" property="item" typeof="WebPage" data-v-0668b171 data-v-442a52aa><!--[-->k8s集群网络上<!--]--><!----></a><!----><meta property="position" content="3" data-v-0668b171></li><!--]--></ol></nav><!--[--><h1 class="vp-doc-title page-title" data-v-01a979e8>k8s集群网络上 <!----></h1><div class="vp-doc-meta" data-v-01a979e8><p class="reading-time" data-v-01a979e8><span class="vpi-books icon" data-v-01a979e8></span><span data-v-01a979e8>3735字</span><span data-v-01a979e8>约12分钟</span></p><!----><p class="create-time" data-v-01a979e8><span class="vpi-clock icon" data-v-01a979e8></span><span data-v-01a979e8>2024-09-29</span></p></div><!--]--><div class="vp-doc plume-content _notes_k8s_e7q1cuv0_ external-link-icon-enabled" vp-content data-v-e798167f><h2 id="服务器网络架构" tabindex="-1"><a class="header-anchor" href="#服务器网络架构"><span>服务器网络架构</span></a></h2><p><img src="/images/E636CCF6CF2B42F1A101A9C61AC4878Fclipboard.png" alt=""></p><ul><li><p>路由器：网络出口</p></li><li><p>核心层：主要完成数据高效转发、链路备份等</p></li><li><p>汇聚层：网络策略、安全、工作站交换机的接 入、VLAN之间通信等功能</p></li><li><p>接入层：工作站的接入</p></li></ul><h2 id="交换技术" tabindex="-1"><a class="header-anchor" href="#交换技术"><span>交换技术</span></a></h2><p><img src="/images/50EFC14312B844A28E30D709A9AE9BE7clipboard.png" alt=""></p><p>交换机工作在OSI参考模型的第二层，即数据链路层。交换机拥有一条高带宽的背部总线 交换矩阵，在同一时间可进行多个端口对之间的数据传输。</p><p>交换技术分为2层和3层：</p><ul><li><p>2层：主要用于小型局域网，仅支持在数据链路层转发数据，对工作站接入。</p></li><li><p>3层：三层交换技术诞生，最初是为了解决广播域的问题，多年发展，三层交换机已经 成为构建中大型网络的主要力量</p></li></ul><p>广播域</p><p>交换机在转发数据时会先进行广播，这个广播可以发送的区域就是一个广播域。交换机之间对广播帧是透明的，所以 交换机之间组成的网络是一个广播域。路由器的一个接口下的网络是一个广播域，所以路由器可以隔离广播域。</p><p>ARP（地址解析协议）</p><p>发送这个广播帧是由ARP协议实现，ARP是通过IP地址获取物理地址的一个TCP/IP协议。</p><p>三层交换机</p><p>前面讲的二层交换机只工作在数据链路层，路由器则工作在网络层。而功能强大的三层交换机可同时工作在数据链路 层和网络层，并根据 MAC地址或IP地址转发数据包。</p><p>VLAN（Virtual Local Area Network）：虚拟局域网</p><p>VLAN是一种将局域网设备从逻辑上划分成一个个网段。一个VLAN就是一个广播域，VLAN之间的通信是通过第3层 的路由器来完成的。VLAN应用非常广泛，基本上大部分网络项目都会划分vlan。</p><p>VLAN的主要好处：</p><ul><li><p>分割广播域，减少广播风暴影响范围。</p></li><li><p>提高网络安全性，根据不同的部门、用途、应用划分不同网段。</p></li></ul><h2 id="路由技术" tabindex="-1"><a class="header-anchor" href="#路由技术"><span>路由技术</span></a></h2><p>路由器主要分为两个端口类型：LAN口和WAN口</p><p>WAN口：配置公网IP，接入到互联网，转发来自LAN口的IP数据包。</p><p>LAN口：配置内网IP（网关），连接内部交换机。</p><p>路由器是连接两个或多个网络的硬件设备，将从端口上接收的数据包，根据数据包的 目的地址智能转发出去。</p><p>路由器的功能：</p><ul><li><p>路由</p></li><li><p>转发</p></li><li><p>隔离子网</p></li><li><p>隔离广播域</p></li></ul><p>路由器是互联网的枢纽，是连接互联网中各个局域网、广域网的设备，相比交换机来说，路由器的数据转发很复杂， 它会根据目的地址给出一条最优的路径。那么路径信息的来源有两种：</p><p>静态路由：指人工手动指定到目标主机的地址然后记录在路由表中，如果其中某个节点不可用则需要重新指定。</p><p>动态路由：则是路由器根据动态路由协议自动计算出路径永久可用，能实时地适应网络结构的变化。</p><p>常用的动态路由协议：</p><ul><li><p>RIP（ Routing Information Protocol ，路由信息协议）</p></li><li><p>OSPF（Open Shortest Path First，开放式最短路径优先）</p></li><li><p>BGP（Border Gateway Protocol，边界网关协议）</p></li></ul><h2 id="osi七层模型" tabindex="-1"><a class="header-anchor" href="#osi七层模型"><span>OSI七层模型</span></a></h2><p>OSI（Open System Interconnection）是国际标准化组织（ISO）制定的一个 用于计算机或通信系统间互联的标准体系，一般称为OSI参考模型或七层模型。</p><p><img src="/images/ADF327DE95DB4C5084D0F3FCAFD2C253clipboard.png" alt=""></p><p><img src="/images/26D0547A8B474E39B4D5916D7FEF47F2clipboard.png" alt=""></p><p>TCP（Transmission Control Protocol，传输控制协议），面向连接协议，双方先建立可靠的连接， 再发送数据。适用于传输数据量大，可靠性要求高的应用场景。</p><p>UDP（User Data Protocol，用户数据报协议），面向非连接协议，不与对方建立连接，直接将数 据包发送给对方。适用于一次只传输少量的数据，可靠性要求低的应用场景。相对TCP传输速度快。</p><h2 id="k8s网络模型-回看docker容器网络模型" tabindex="-1"><a class="header-anchor" href="#k8s网络模型-回看docker容器网络模型"><span>K8s网络模型： 回看Docker容器网络模型</span></a></h2><p><img src="/images/CA8CDD48CDFC49049408825D2227E9FEclipboard.png" alt=""></p><p>Docker网络模型涉及的名词：</p><ul><li><p>网络的命名空间：Linux在网络栈中引入网络命名空间，将独立的网络协议栈隔离到不同的命名空间中，彼此间无法通信； Docker利用这一特性，实现不同容器间的网络隔离。</p></li><li><p>Veth设备对：Veth设备对的引入是为了实现在不同网络命名空间的通信。</p></li><li><p>Iptables/Netfilter：Docker使用Netfilter实现容器网络转发。</p></li><li><p>网桥：网桥是一个二层网络设备，通过网桥可以将Linux支持的不同的端口连接起来，并实现类似交换机那样的多对多的通信。</p></li><li><p>路由：Linux系统包含一个完整的路由功能，当IP层在处理数据发送或转发的时候，会使用路由表来决定发往哪里。</p></li></ul><h2 id="k8s网络模型-pod网络" tabindex="-1"><a class="header-anchor" href="#k8s网络模型-pod网络"><span>K8s网络模型：Pod网络</span></a></h2><p><img src="/images/949A3B8EAAB5429BB82ACE90062F3E35clipboard.png" alt=""></p><p>Pod是K8s最小调度单元，一个Pod由一个容器或多个容器组成，当多个容器时，怎么都用这一个Pod IP？</p><p>实现：k8s会在每个Pod里先启动一个infra container小容器，然后让其他的容器连接进来这个网络命名空间，然后其 他容器看到的网络试图就完全一样了。即网络设备、IP地址、Mac地址等。在Pod的IP地址就是infra container的IP地 址。</p><p>在 Kubernetes 中，每一个 Pod 都有一个真实的 IP 地址，并且每一个 Pod 都可以使用此 IP 地址与 其他 Pod 通信。</p><p>Pod之间通信会有两种情况：</p><ul><li><p>两个Pod在同一个Node上</p></li><li><p>两个Pod在不同Node上</p></li></ul><p>第一种情况：两个Pod在同一个Node上</p><p>同节点Pod之间通信道理与Docker网络一样的，如下图：</p><p><img src="/images/C9E89486F7CA4EE9BE204C905BF5AA73clipboard.png" alt=""></p><p>1.对 Pod1 来说，eth0 通过虚拟以太网设备 （veth0）连接到 root namespace；</p><p>2.网桥 cbr0 中为 veth0 配置了一个网段。一旦 数据包到达网桥，网桥使用ARP 协议解析出其 正确的目标网段 veth1；</p><p>3.网桥 cbr0 将数据包发送到 veth1；</p><p>4.数据包到达 veth1 时，被直接转发到 Pod2 的 network namespace 中的 eth0 网络设备。</p><p>第二种情况：两个Pod在不同Node上</p><p><img src="/images/8F915E645EB54EEA98D52BE2042CFA1Eclipboard.png" alt=""></p><p>相比同节点Pod通信，这里源Pod发出的数据包需 要传递到目标节点，但是源Pod并不知道目标Pod 在哪个节点上？</p><p>因此，为了实现容器跨主机通信需求，就需要部署网络组件，这些网络组件都必 须满足如下要求：</p><ul><li><p>一个Pod一个IP</p></li><li><p>所有的 Pod 可以与任何其他 Pod 直接通信</p></li><li><p>所有节点可以与所有 Pod 直接通信</p></li><li><p>Pod 内部获取到的 IP 地址与其他 Pod 或节点与其通信时的 IP 地址是同一个</p></li></ul><p>目前支持的一些K8s网络组件：</p><p><img src="/images/762CAE4691BD42B5A10116EF472228D1clipboard.png" alt=""></p><p>网络组件说明：https://kubernetes.io/docs/concepts/cluster-administration/networking/</p><h2 id="k8s网络模型-cni-容器网络接口" tabindex="-1"><a class="header-anchor" href="#k8s网络模型-cni-容器网络接口"><span>K8s网络模型： CNI（容器网络接口）</span></a></h2><p>CNI（Container Network Interface，容器网络接口)：是一个容器网络规范，Kubernetes网络采用的就是这个CNI规 范，负责初始化infra容器的网络设备。</p><p>CNI二进制程序默认路径：/opt/cni/bin/</p><p>项目地址：https://github.com/containernetworking/cni</p><p>以Flannel网络组件为例，当部署Flanneld后，会在每台宿主机上生成它对应的CNI配置文件（它其实是一个 ConfigMap），从而告诉Kubernetes要使用 Flannel 作为容器网络方案。</p><p>CNI配置文件默认路径：/etc/cni/net.d</p><p>当 kubelet 组件需要创建 Pod 的时候，先调用dockershim它先创建一个 Infra 容器。然后调用 CNI 插件为 Infra 容器 配置网络。</p><p>这两个路径可在kubelet启动参数中定义：</p><p>--network-plugin=cni</p><p>--cni-conf-dir=/etc/cni/net.d</p><p>--cni-bin-dir=/opt/cni/bin</p><h2 id="k8s网络组件之flannel" tabindex="-1"><a class="header-anchor" href="#k8s网络组件之flannel"><span>K8s网络组件之Flannel</span></a></h2><p>Flannel是CoreOS维护的一个网络组件，Flannel为每个Pod提供全局唯一的IP，Flannel使用ETCD来存储Pod子网与 Node IP之间的关系。flanneld守护进程在每台主机上运行，并负责维护ETCD信息和路由数据包。</p><p>项目地址：https://github.com/coreos/flannel</p><p>YAML地址：https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml</p><h2 id="k8s网络组件之flannel-部署" tabindex="-1"><a class="header-anchor" href="#k8s网络组件之flannel-部署"><span>K8s网络组件之Flannel：部署</span></a></h2><p>部署前有两处可能需要调整：</p><p>kube-flannel.yml</p><p><img src="/images/F247FFA929434234902653C0DADDF996clipboard.png" alt=""></p><p>Network：指定Pod IP分配的网段，与controller-manager配置的保持一样。</p><ul><li><p>--allocate-node-cidrs=true</p></li><li><p>--cluster-cidr=10.244.0.0/16</p></li><li><p>kubeadm部署：/etc/kubernetes/manifests/kube-controller-manager.yaml</p></li><li><p>二进制部署：/opt/kubernetes/cfg/kube-controller-manager.conf</p></li></ul><p>Backend：指定工作模式</p><h2 id="k8s网络组件之flannel-工作模式" tabindex="-1"><a class="header-anchor" href="#k8s网络组件之flannel-工作模式"><span>K8s网络组件之Flannel：工作模式</span></a></h2><p>Flannel支持多种工作模式：</p><ul><li><p>UDP：最早支持的一种方式，由于性能最差，目前已经弃用。</p></li><li><p>VXLAN：Overlay Network方案，源数据包封装在另一种网络包里面进行路由转发和通信</p></li><li><p>Host-GW：Flannel通过在各个节点上的Agent进程，将容器网络的路由信息写到主机的路由表上，这样一来所有 的主机都有整个容器网络的路由数据了。</p></li><li><p>Directrouting：同时支持VXLAN和Host-GW工作模式</p></li><li><p>公有云VPC：ALIYUN，AWS</p></li></ul><h2 id="k8s网络组件之flannel-vxlan模式" tabindex="-1"><a class="header-anchor" href="#k8s网络组件之flannel-vxlan模式"><span>K8s网络组件之Flannel：VXLAN模式</span></a></h2><p>VXLAN介绍</p><p>VXLAN，即 Virtual Extensible LAN（虚拟可扩展局域网），是 Linux 内核本身就支持的一种网络 虚似化技术。VXLAN 可以完全在内核态实现上述封装和解封装的工作，从而通过与前面相似的“隧 道”机制，构建出覆盖网络（Overlay Network）。</p><p>VXLAN的覆盖网络设计思想：在现有的三层网络之上，覆盖一个二层网络，使得连接在这个VXLAN 二层网络上的主机之间，可以像在同一局域网里通信。</p><p>为了能够在二层网络上打通“隧道” ，VXLAN 会在宿主机上设置一个特殊的网络设备作为“隧道” 的两端。这个设备就叫作 VTEP，即：VXLAN Tunnel End Point（虚拟隧道端点）。</p><p>VTEP设备进行封装和解封装的对象是二层数据帧，这个工作是在Linux内核中完成的。</p><p>Flannel工作逻辑图如下：</p><p><img src="/images/78BFAAAF1E504AA1ADAC3BA1D40ED482clipboard.png" alt=""></p><p>如果Pod 1访问Pod 2，源地址10.244.1.10，目的地址10.244.2.10 ，数据包传输流程如下：</p><p>1.容器路由：容器根据路由表，将数据包发送下一跳10.244.1.1，从eth0网卡出。可以使用ip route命令查看路由表</p><p><img src="/images/CDCC5B1CD9DF416B8992A7AA90D5410Bclipboard.png" alt=""></p><p>2.主机路由：数据包进入到宿主机虚拟网卡cni0，根据路由表转发到flannel.1虚拟网卡，也就是来到了隧道的入口。 10.244.2.0/24 via 10.244.2.0 dev flannel.1 onlink # 凡是发往10.244.2.0/24网段的数据包，都需要经过flannel.1设备发出，并且下一跳是10.244.2.0， 即Node2 VTEP设备flannel.1。</p><p><img src="/images/DF7FE5B950AA4556867A3EFE53782999clipboard.png" alt=""></p><p><img src="/images/943B2A691FFD4AA68C1ED405E264A507clipboard.png" alt=""></p><p>3.VXLAN封装：而这些VTEP设备之间组成一个二层网络，但是二层网络必须要知道目的MAC地址，那这个MAC地址从哪获取到呢？其实在flanneld进 程启动后，就会自动添加其他节点ARP记录，可以通过ip neigh show dev flannel.1命令查看。</p><p><img src="/images/589E4F3D29B9452F8BB2ABA112DF9C1Aclipboard.png" alt=""></p><p>4.二次封包：知道了目的MAC地址，Linux内核就可以进行二层封包了。但是，对于宿主机网络来说这个二层帧并不能在宿主机二层网络里传输。所以接 下来，Linux内核还要把这个数据帧进一步封装成为宿主机网络的一个普通数据帧，好让它载着内部数据帧，通过宿主机的ens33网卡进行传输。 数据格式如下图：</p><p><img src="/images/C067F3160882498A90BC1C6B50FEEE54clipboard.png" alt=""></p><p>5.封装到UDP包发出去：在封装成宿主机网络可传输的数据帧时，还缺少目标宿主机MAC地址，也就是说这个UDP包该发给哪台宿主机呢？ flanneld进程也维护着一个叫做FDB的转发数据库，可以通过bridge fdb show dev flannel.1命令查看。可以看到，上面用的对方flannel.1的MAC地址 对应宿主机IP，也就是UDP要发往的目的地。所以使用这个目的IP与MAC地址进行封装。</p><p><img src="/images/E1CC9578BB0D46389B0E1BA236732BA1clipboard.png" alt=""></p><p>6.数据包到达目的宿主机：接下来，就是宿主机与宿主机之间通信了，数据包从Node1的ens33网卡发出去，Node2接收到数据包，解封装发现是VXLAN 数据包，把它交给flannel.1设备。flannel.1设备则会进一步拆包，取出原始IP包（源容器IP和目标容器IP），通过cni0网桥二层转发给容器。</p><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#抓包分析</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">tcpdump</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -i</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> flannel.1</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -nn</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  #-i 的作用是指定监听哪个网卡</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">tcpdump</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> udp</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">  -i</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ens33</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -nn</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">   #-nn 不进行端口名称的转换</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Tcpdump抓包指南之关键字的使用</p><p>1.类型关键字：  host，net，port</p><p>2.传输关键字：src，dst</p><p>3.协议关键字：tcp,udp,http,arp,ftp</p><p><img src="/images/D9885550172242E19DB576B68EE98223clipboard.png" alt=""></p><h2 id="k8s网络组件之flannel-host-gw模式" tabindex="-1"><a class="header-anchor" href="#k8s网络组件之flannel-host-gw模式"><span>K8s网络组件之Flannel：HOST-GW模式</span></a></h2><p>host-gw模式相比vxlan简单了许多，直接添加路由，将目的主机当做网关，直接路由原始封包。</p><p><img src="/images/7ED7AC6E90B8450DBD7D700ED9B7E23Bclipboard.png" alt=""></p><p>修改配置文件：</p><p>kube-flannel.yml</p><p><img src="/images/7A61D71570864075886347EE1BE20CABclipboard.png" alt=""></p><p>当你设置flannel使用host-gw模式，flanneld会在宿主机上创建节点的路由表：</p><p><img src="/images/F5367A99B1774053B1DC2D1B5E6635D4clipboard.png" alt=""></p><p>目的 IP 地址属于 10.244.2.0/24 网段的 IP 包，应该经过本机的 eth33 设备发出去（即：dev ens33）；并且，它下一跳地址是 192.168.0.13（即：via 192.168.0.13）。</p><p>一旦配置了下一跳地址，那么接下来，当 IP 包从网络层进入链路层封装成帧的时候，ens33 设备就会使用下一跳地址对应的 MAC 地址，作为该数据帧的目的 MAC 地址。</p><p><img src="/images/259307CC1DDA432BB2E44D87AC13D024clipboard.png" alt=""></p><p>而 Node 2 的内核网络栈从二层数据帧里拿到 IP 包后，会“看到”这个 IP 包的目的 IP 地址是 10.244.2.10，即 container-2 的 IP 地址。这时候，根据 Node 2 上的路由表，该目的地址会匹配到第五条路由规则（也就是 10.244.2.0 对应的路由规则），从而 进入 cni0 网桥，进而进入到 container-2 当中。</p><p><img src="/images/D0F71BED5D54494D81D9FA3BDEDB6702clipboard.png" alt=""></p><p>可见，数据包是封装成帧发送出去的，会使用路由表的下一跳来设置目的MAC地址，会经过二层网络到达目的节点，因此，hostgw模式必须要求集群宿主机之间二层连通。</p><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#抓包分析</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">tracepath</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 10.244.1.3</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">tcpdump</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -i</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ens33</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -nn</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dst</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 10.244.2.4</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="/images/11FFDE2820754EC0AC00FF78C33FF2DDclipboard.png" alt=""></p><h2 id="k8s网络组件之flannel-小结" tabindex="-1"><a class="header-anchor" href="#k8s网络组件之flannel-小结"><span>K8s网络组件之Flannel：小结</span></a></h2><p>VXLAN特点：</p><ul><li><p>先进行二层帧封装，再通过宿主机网络封装，解封装也一样，所以增加性能开销</p></li><li><p>对宿主机网络要求低，只要三层网络可达</p></li></ul><p>Host-GW特点：</p><ul><li><p>直接路由转发，性能损失很小</p></li><li><p>对宿主机网络要求二层可达</p></li></ul><p>卸载flnnel</p><p>https://blog.csdn.net/weixin_34409741/article/details/92513036</p><p>学习：https://edu.51cto.com/center/course/lesson/index?id=532871</p></div></main><footer class="vp-doc-footer" data-v-e798167f data-v-f2100d82><!--[--><!--]--><div class="edit-info" data-v-f2100d82><div class="edit-link" data-v-f2100d82><a class="vp-link no-icon link edit-link-button" href="https://github.com/liuzhemax/docs/edit/main/docs/notes/k8s/upgrade/5.k8s集群网络上.md" target="_blank" rel="noreferrer" data-v-f2100d82 data-v-442a52aa><!--[--><span class="vpi-square-pen edit-link-icon" aria-label="edit icon" data-v-f2100d82></span> 编辑此页<!--]--><!----></a></div><!----></div><!----><nav class="prev-next" data-v-f2100d82><div class="pager" data-v-f2100d82><a class="vp-link no-icon link pager-link prev" href="/notes/k8s/lo8jgp54/" data-v-f2100d82 data-v-442a52aa><!--[--><span class="desc" data-v-f2100d82>上一页</span><span class="title" data-v-f2100d82>kubernetes应用包管理器helm下</span><!--]--><!----></a></div><div class="pager" data-v-f2100d82><a class="vp-link no-icon link pager-link next" href="/notes/k8s/e3olzjeh/" data-v-f2100d82 data-v-442a52aa><!--[--><span class="desc" data-v-f2100d82>下一页</span><span class="title" data-v-f2100d82>k8s集群网络下</span><!--]--><!----></a></div></nav></footer><div id="comment" class="giscus-wrapper input-top vp-comment" vp-comment style="display:block;" data-v-e798167f><div class="loading-icon-wrapper" style="display:flex;align-items:center;justify-content:center;height:96px"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div></div><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!--]--><button style="display:none;" type="button" class="vp-back-to-top" aria-label="back to top" data-v-0b7e05b4 data-v-9d19ba45><span class="percent" data-v-9d19ba45>0%</span><span class="show icon vpi-back-to-top" data-v-9d19ba45></span><svg aria-hidden="true" data-v-9d19ba45><circle cx="50%" cy="50%" style="stroke-dasharray:calc(0% - 12.566370614359172px) calc(314.1592653589793% - 12.566370614359172px);" data-v-9d19ba45></circle></svg></button><footer class="vp-footer has-sidebar" vp-footer data-v-0b7e05b4 data-v-368f94aa><div class="container" data-v-368f94aa><!----><p class="copyright" data-v-368f94aa>Copyright © 2024 阿哲 www.azhe.asia</p></div></footer><!--[--><!--]--><!--]--></div><!--[--><!--]--><!--]--></div><script type="module" src="/assets/app-D5peQ_E2.js" defer></script></body></html>